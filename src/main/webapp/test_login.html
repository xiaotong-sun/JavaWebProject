<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/jquery-3.6.0.min.js"></script>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script>
        $(function () {
            // 点击更换验证码
            $("#code").click(function () {
                $("#code-img").prop("src", "VerificationCodeServlet?time=" + new Date().getTime());
            });

            // 登陆按钮时间，请求后台
            $("#login").click(function () {
                // ajax 异步请求，参数分别为：请求路径，传递数据，回调函数
                $.get("user/login", $("#login-form").serialize(), function (data) {
                    // 判断是否登陆成功
                    if (data["flag"]){
                        // 登陆成功，直接跳转首页
                        location.href = 'test_index.html';
                    }else {
                        // 登陆失败，显示错误信息
                        $("#error-msg").html(data["errorMsg"]);
                    }
                })
            });
        });


    </script>
</head>
<body>
<form id="login-form">
    <label for="username">用户名</label>
    <input id="username" name="username" type="text">
    <label for="password">密码</label>
    <input id="password" name="password" type="text">
    <label for="verification-code">验证码</label>
    <input id="verification-code" name="verificationCode" type="text">
    <div id="code">
        <img id="code-img" src="VerificationCodeServlet" alt="">
    </div>
    <div id="login" class="btn btn-primary">登陆</div>
    <div id="error-msg"></div>
</form>
</body>
</html>